# PNG Image Viewer with metadata
!["Overview Image"](readme_images/overview.png)
## 動作条件
Windows 11  
python 3.14 (でしか動作確認していません)
## インストール＆起動方法
start.bat を実行するだけ。  
勝手に start.bat と同じディレクトリにvenv環境が作られて実行されます。  
初回以降も start.bat を実行すればいいです。
## 使い方
### 左ペイン
#### トグルスイッチ
左上隅にあるトグルスイッチはテーマの切り替え用です。  
初回起動時はライトテーマになっており、切り替えることでダークテーマになります。  
アプリ終了時にどちらにしていたかを記憶しています。
#### 閲覧モード
Windowsのエクスプローラーに似たファイルリストが表示されます。  
移動　　：左クリック  
履歴移動：マウスの進む/戻る  
表示更新：再度閲覧モードのボタンを左クリック  

また、直前に見ていた場所を記憶しており、次回の起動時や検索モードから切り替えた際に状態を再現します。
#### 検索モード
ディレクトリを指定して、ファイル名およびメタデータ(Stable Diffusion WebUIのプロンプトが入っているtEXt要素のみ)に対して完全一致検索ができます。  
サブディレクトリは再帰的に検索します。  
データが山盛り入っているドライブの直下などを指定すると死ぬほど重いのでご注意ください。  
（検索中やサムネイル表示途中にクリックすると中断できます。）  
また、閲覧モードから切り替えた際は直前の検索結果を復元しますが、前回起動時に最後に検索した内容は記憶していません。
### 中ペイン
#### 閲覧モード
ファイルブラウザ側でPNG画像のあるディレクトリに移動すると、サムネイル表示がされます。  
サムネイルをクリックすることや、ファイルブラウザから直接画像を選択することで画像1枚を大きく表示できます。  
#### 検索モード
検索条件に一致したものがあるとサムネイル表示がされます。  
サムネイルをクリックすることで画像1枚を大きく表示できます。  
#### 右クリックメニュー
!["Right Click Menu Image"](readme_images/right_click_menu.png)  
表示された1枚の画像を右クリックすると専用のメニューが現れます。
- クリップボードにコピー
  - 透明度の有無を選べます。
  - 透明度のある画像を透明度なしでコピーした場合、透明な部分は白になります。
- メタデータを消去した状態で保存する
  - 本スクリプト直下のoutputディレクトリに_cleanedというファイル接尾語が付与されて保存されます。
  - 通常のメタデータのほか、アルファ値に埋め込まれているプロンプトも消えます。
  - その際に同名のファイルがあった場合は上書きされます。
- この画像のフォルダをWindowsのエクスプローラで開く
  - 表示中の画像が選択された状態でWindowsのエクスプローラが立ち上がります。

### 右ペイン：ファイル情報(メタデータ)
ここには画像をクリックした際にメタデータなどが表示されます。  
!["Right Panel Image"](readme_images/right_panel.png)  
Stable Duffusion WebUIで生成された画像については
- ポジティブプロンプト
- ネガティブプロンプト
- その他情報

というように表示され、それぞれクリップボードへのコピーボタンが表示されます。  
※ComfyUIで作成された画像については非対応です。生の値が表示されます。  
※NovelAI等の生成画像で使われているアルファ値に埋め込まれたメタデータに関しては非対応です。  

## Q&A
### Q. なんでこんなもん作ったの？
A. AIにコーディングさせたらどうなるのかという実験目的。なかなかに楽しい。  
　 あえてコーディングにはあまり向いていないといわれるGrokにやらせている。(2025/12現在 4.1 beta)
### Q. EXE化はしないの？
A. あくまでもAIにコーディングをやらせてみるという実験の産物なので、今のところ予定はありません。